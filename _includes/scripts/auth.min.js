const{createClient:createClient}=window.supabase,supabaseUrl="https://anahjzknhplcbhakwjdl.supabase.co",supabaseAnonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFuYWhqemtuaHBsY2JoYWt3amRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjc3Mjg2ODYsImV4cCI6MjA0MzMwNDY4Nn0.67uic887BZfBkMv2VlrCYqxpvmjNFQK2SCVIsx1EY4o",supabase=createClient(supabaseUrl,supabaseAnonKey);async function loginUser(email,password){try{const rememberMe=document.getElementById("rememberMe").checked,{data:data,error:error}=await supabase.auth.signInWithPassword({email:email,password:password});if(error)throw error;const session=data.session;if(session)return localStorage.setItem("supabaseToken",session.access_token),rememberMe&&localStorage.setItem("rememberMe","true"),console.log("Login successful:",session),session;throw new Error("Login failed: No session returned.")}catch(error){throw console.error("Login error:",error),error}}async function forgotPassword(email){try{const{error:error}=await supabase.auth.resetPasswordForEmail(email);if(error)throw error;console.log("Password reset email sent to:",email)}catch(error){throw console.error("Password reset error:",error),error}}async function checkUser(){const{data:data,error:error}=await supabase.auth.getSession();if(!error&&data.session){const userInfo=data.user;return localStorage.setItem("userRole",userInfo.role||"Listener"),userInfo}window.location.href="/login"}async function logoutUser(){try{await supabase.auth.signOut(),localStorage.removeItem("supabaseToken"),localStorage.removeItem("userId"),localStorage.removeItem("userRole"),localStorage.removeItem("rememberMe"),console.log("User logged out due to inactivity."),window.location.href="/login"}catch(error){console.error("Logout error:",error)}}function manageSessionPersistence(){const rememberMe=localStorage.getItem("rememberMe"),supabaseToken=localStorage.getItem("supabaseToken");return"true"===rememberMe&&console.log("Remember Me is active. Session will persist."),supabaseToken}window.loginUser=loginUser,window.logoutUser=logoutUser,window.checkUser=checkUser,window.forgotPassword=forgotPassword;