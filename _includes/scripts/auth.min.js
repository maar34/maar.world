async function loginUser(email,password){try{const response=await fetch("http://media.maar.world:3001/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email,password:password})});if(!response.ok)throw new Error("Login failed");const data=await response.json();console.log("Login response:",data),localStorage.setItem("token",data.token),localStorage.setItem("userId",data.user.id),window.location.href="/voyage"}catch(error){console.error("Login error:",error),document.getElementById("message").innerText="Login failed. Please try again."}}async function forgotPassword(email){try{const response=await fetch("http://media.maar.world:3001/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Password reset failed")}console.log("Password reset email sent to:",email)}catch(error){throw console.error("Password reset error:",error),error}}function checkAuth(){localStorage.getItem("token")?console.log("User is logged in"):window.location.href="/login"}async function logoutUser(){try{const token=localStorage.getItem("token");if(!(await fetch("http://media.maar.world:3001/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${token}`}})).ok)throw new Error("Logout failed");localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("username"),window.location.href="/login"}catch(error){console.error("Logout error:",error)}}function manageSessionPersistence(){const token=localStorage.getItem("token");return token&&console.log("Session will persist with token."),token}window.loginUser=loginUser,window.logoutUser=logoutUser,window.forgotPassword=forgotPassword;